<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Customer List</title>
</head>
<body>
<h1>Customers</h1>
<table>
    <thead>
    <tr>
        <th>Customer Name</th>
        <th>Invoice Count</th>
        <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="entry : ${customerInvoiceCount}">
        <td th:text="${entry.key}"></td>
        <td th:text="${entry.value}"></td>
        <td>
            <a th:href="@{/customers/{customerName}(customerName=${entry.key})}">View Details</a>
            <form th:action="@{/customers/{customerName}/delete(customerName=${entry.key})}" method="post" style="display:inline;">
                <button type="button" onclick="return confirmDelete()">Delete</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>
<br>
<a href="/invoices">Back to Invoices</a>
<script>
    function confirmDelete() {
        return confirm('Are you sure you want to delete all invoices for this customer?');
    }
</script>
</body>
</html>
